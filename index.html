<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cyber Flashcards</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      background: #0a0f1a;
      color: #e0e6f0;
    }

    header {
      background: #111827;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    header h1 {
      font-size: 24px;
      color: #60a5fa;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    button {
      background: #1e2a3a;
      border: 1px solid #3b4a63;
      border-radius: 6px;
      color: #60a5fa;
      padding: 10px 16px;
      font-size: 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s;
    }

    button:hover {
      background: #2a3a52;
    }

    .flashcards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .card {
      background: #112136;
      border: 1px solid #2e4157;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(96,165,250,0.2);
      text-align: center;
      transition: transform 0.2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(96,165,250,0.4);
    }

    .card-buttons {
      margin-top: 12px;
      display: flex;
      justify-content: space-between;
    }

    .card-buttons button {
      flex: 1;
      font-size: 13px;
      padding: 6px;
      justify-content: center;
    }

    .know {
      border-color: #34d399;
      color: #34d399;
    }

    .know:hover {
      background-color: #34d39933;
    }

    .dontknow {
      border-color: #f87171;
      color: #f87171;
    }

    .dontknow:hover {
      background-color: #f8717133;
    }

    .progress, .page-info {
      text-align: center;
      font-size: 15px;
      margin: 10px 0;
      color: #9ca3af;
    }

    .unknown-list {
      background: #112136;
      border: 1px solid #2e4157;
      border-radius: 6px;
      padding: 15px;
      margin-top: 20px;
    }

    .unknown-list ul {
      list-style: none;
      padding: 0;
    }

    .unknown-list li {
      padding: 5px 0;
      border-bottom: 1px solid #2d333b;
    }

    svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }
  </style>
</head>
<body>

  <header>
    <h1>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M3 4a1 1 0 0 1 1-1h2l1-1h10l1 1h2a1 1 0 0 1 1 1v2H3V4zm0 4h18v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V8zm4 3v2h2v-2H7zm0 4v2h2v-2H7z"/>
      </svg>
      Cyber Flashcards
    </h1>
    <span id="progress-info" class="progress">Loading progress...</span>
  </header>

  <div class="container">

    <div class="controls">
      <button id="prev-btn"><svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>Prev</button>
      <button id="next-btn">Next<svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg></button>
      <button id="mode-toggle"><svg viewBox="0 0 24 24"><path d="M12 8v8m0-8l-4 4m4-4l4 4"/></svg>EN → DE</button>
      <button id="review-toggle">Review unknown: OFF</button>
      <button id="show-unknown">Show Unknown List</button>
      <button id="reset-progress"><svg viewBox="0 0 24 24"><path d="M4 4v6h6M20 20v-6h-6M4 20h16"/></svg>Reset Progress</button>
    </div>

    <div class="flashcards" id="flashcard-container"></div>
    <div class="page-info" id="page-info"></div>
    <div class="unknown-list" id="unknown-list" style="display: none;"></div>
  </div>

  <script>
    const flashcards = [
      { front: "Reisen", back: "Travels", id: "reisen" },
      { front: "Haus", back: "House", id: "haus" },
      { front: "Freund", back: "Friend", id: "freund" },
      { front: "Schule", back: "School", id: "schule" },
      { front: "lernen", back: "to learn", id: "lernen" },
      { front: "lesen", back: "to read", id: "lesen" },
      { front: "Buch", back: "Book", id: "buch" },
      { front: "schreiben", back: "to write", id: "schreiben" }
    ];

    let currentPage = 1;
    const cardsPerPage = 4;
    let showFront = true;
    let flashcardPool = [];
    let reviewOnlyUnknown = false;
    const knownStatus = JSON.parse(localStorage.getItem("knownStatus") || "{}");

    function shuffleWeighted(cards) {
      let activeCards = cards;
      if (reviewOnlyUnknown) {
        activeCards = cards.filter(card => knownStatus[card.id] !== true);
      }
      flashcardPool = activeCards
        .map(card => {
          const weight = knownStatus[card.id] === false ? 3 : 1;
          return Array(weight).fill(card);
        })
        .flat()
        .sort(() => Math.random() - 0.5);
    }

    function renderProgress() {
      const total = flashcards.length;
      const known = Object.values(knownStatus).filter(v => v === true).length;
      const percent = total ? Math.round((known / total) * 100) : 0;
      document.getElementById("progress-info").textContent = `Progress: ${known}/${total} known (${percent}%)`;
    }

    function renderUnknownList() {
      const listDiv = document.getElementById("unknown-list");
      const unknown = flashcards.filter(card => knownStatus[card.id] !== true);
      if (listDiv.style.display === "none") {
        let html = "<strong>Unknown Words:</strong><ul>";
        unknown.forEach(card => {
          html += `<li>${card.front} → ${card.back}</li>`;
        });
        html += "</ul>";
        listDiv.innerHTML = html;
        listDiv.style.display = "block";
      } else {
        listDiv.style.display = "none";
      }
    }

    function renderCards() {
      const container = document.getElementById("flashcard-container");
      container.innerHTML = "";

      const start = (currentPage - 1) * cardsPerPage;
      const cardsToShow = flashcardPool.slice(start, start + cardsPerPage);

      cardsToShow.forEach(card => {
        const cardDiv = document.createElement("div");
        cardDiv.className = "card";
        cardDiv.innerHTML = `<div class="text">${showFront ? card.front : card.back}</div>`;

        cardDiv.addEventListener("click", () => {
          const textDiv = cardDiv.querySelector(".text");
          textDiv.textContent = textDiv.textContent === (showFront ? card.front : card.back)
            ? (showFront ? card.back : card.front)
            : (showFront ? card.front : card.back);
        });

        const btnContainer = document.createElement("div");
        btnContainer.className = "card-buttons";

        const knowBtn = document.createElement("button");
        knowBtn.textContent = "I know this";
        knowBtn.className = "know";
        knowBtn.onclick = () => {
          knownStatus[card.id] = true;
          localStorage.setItem("knownStatus", JSON.stringify(knownStatus));
          shuffleWeighted(flashcards);
          renderProgress();
          renderCards();
        };

        const dontBtn = document.createElement("button");
        dontBtn.textContent = "Don't know";
        dontBtn.className = "dontknow";
        dontBtn.onclick = () => {
          knownStatus[card.id] = false;
          localStorage.setItem("knownStatus", JSON.stringify(knownStatus));
          shuffleWeighted(flashcards);
          renderProgress();
          renderCards();
        };

        btnContainer.appendChild(knowBtn);
        btnContainer.appendChild(dontBtn);
        cardDiv.appendChild(btnContainer);
        container.appendChild(cardDiv);
      });

      const totalPages = Math.ceil(flashcardPool.length / cardsPerPage);
      document.getElementById("page-info").textContent = `Page ${currentPage} of ${totalPages}`;
      document.getElementById("prev-btn").disabled = currentPage === 1;
      document.getElementById("next-btn").disabled = currentPage >= totalPages;
    }

    document.getElementById("prev-btn").onclick = () => {
      if (currentPage > 1) {
        currentPage--;
        renderCards();
      }
    };

    document.getElementById("next-btn").onclick = () => {
      const maxPage = Math.ceil(flashcardPool.length / cardsPerPage);
      if (currentPage < maxPage) {
        currentPage++;
        renderCards();
      }
    };

    document.getElementById("mode-toggle").onclick = () => {
      showFront = !showFront;
      document.getElementById("mode-toggle").textContent = showFront ? "EN → DE" : "DE → EN";
      renderCards();
    };

    document.getElementById("review-toggle").onclick = () => {
      reviewOnlyUnknown = !reviewOnlyUnknown;
      document.getElementById("review-toggle").textContent =
        reviewOnlyUnknown ? "Review unknown: ON" : "Review unknown: OFF";
      currentPage = 1;
      shuffleWeighted(flashcards);
      renderCards();
    };

    document.getElementById("show-unknown").onclick = () => {
      renderUnknownList();
    };

    document.getElementById("reset-progress").onclick = () => {
      if (confirm("Are you sure you want to reset all progress?")) {
        localStorage.removeItem("knownStatus");
        Object.keys(knownStatus).forEach(k => delete knownStatus[k]);
        currentPage = 1;
        shuffleWeighted(flashcards);
        renderProgress();
        renderCards();
        document.getElementById("unknown-list").style.display = "none";
      }
    };

    // Initial load
    shuffleWeighted(flashcards);
    renderProgress();
    renderCards();
  </script>
</body>
</html>
